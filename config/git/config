# vim: set ft=gitconfig:
[credential]
	helper = osxkeychain

[color]
	ui = true

[push]
	# Default push should only push the current branch to its push target, regardless of its remote name
	default = current
	autoSetupRemote = true

[pull]
	rebase = true

[commit]
	gpgsign = true

[core]
	excludesfile = ~/.config/git/ignore
	attributesfile = ~/.config/git/attributes
	hooksPath = ~/.config/git/hooks/

	# Don't consider trailing space or EOL changes as a cause for merge conflicts
	whitespace = -trailing-space,cr-at-eol

[alias]
	lastchange = log -p -n 1
	trim = !git remote prune origin && git gc
	tag = tag -s
	change-commits = "!f() { VAR=$1; OLD=$2; NEW=$3; shift 3; git filter-branch --env-filter \"if [[ \\\"$`echo $VAR`\\\" = '$OLD' ]]; then export $VAR='$NEW'; fi\" $@; }; f"

	# https://mtsknn.fi/blog/how-to-force-push-in-git-with-style-and-some-safety/
	please = push --force-with-lease

[rebase]
	autostash = true

[user]
	name = Brian van Burken
	useConfigOnly = true
	email = brianvanburken@users.noreply.github.com

[init]
	defaultBranch = main

[log]
	# Use abbrev SHAs whenever possible/relevant instead of full 40 chars
	abbrevCommit = true

[status]
	# Recursively traverse untracked directories to display all contents
	showUntrackedFiles = all

[tag]
	# Sort tags as version numbers whenever applicable, so 1.10.2 is AFTER 1.2.0.
	sort = version:refname
	gpgsign = true

[gpg]
	format = ssh

[gpg "ssh"]
	allowedSignersFile = ~/.ssh/allowed_signers
